<div class="modalShippingCompany-container">
	<div class="header-dialog">
		<p>Associar transportadora</p>
		<div class="close-button" title="Fechar" mat-dialog-close>
			<mat-icon>close</mat-icon>
		</div>
	</div>

	<div class="container">
		<mat-stepper [orientation]="(stepperOrientation | async)!" [linear]="true">
			<mat-step
				label="Dados do veículo"
				state="edit"
				errorMessage="Preencha os campos obrigatórios."
			>
				<form [formGroup]="_formGroupRoute" autocomplete="off">
					<mat-form-field>
						<mat-label> origem </mat-label>
						<input matInput type="text" formControlName="origem" required />
						<mat-error *ngIf="!_formGroupRoute.hasError('required')">
							Informe a origem.
						</mat-error>
					</mat-form-field>
					<mat-form-field>
						<mat-label> Destino </mat-label>
						<input matInput type="text" formControlName="destino" required />
						<mat-error *ngIf="!_formGroupRoute.hasError('required')">
							Informe o destino.
						</mat-error>
					</mat-form-field>
					<mat-form-field>
						<mat-label> Preço </mat-label>
						<input
							matInput
							type="text"
							formControlName="preco"
							required
							inputmode="decimal"
						/>
						<mat-error *ngIf="!_formGroupRoute.hasError('required')">
							Informe o valor.
						</mat-error>
					</mat-form-field>
					<mat-form-field>
						<mat-label>Previsão de entrega</mat-label>
						<input
							matInput
							[matDatepicker]="picker"
							formControlName="previsaoEntrega"
						/>
						<mat-datepicker-toggle
							matSuffix
							[for]="picker"
						></mat-datepicker-toggle>
						<mat-datepicker #picker></mat-datepicker>
					</mat-form-field>
					<div class="download-group" style="grid-column: 2">
						<mat-form-field>
							<mat-label> Foto CNH </mat-label>
							<input
								matInput
								formControlName="imagemCNH"
								placeholder="Envie uma imagem"
								[value]="fileRota?.name || ''"
								required
								readonly
							/>
							<mat-icon matSuffix (click)="safeFile($event)"> badge </mat-icon>
						</mat-form-field>
						<input
							type="file"
							id="fileRota"
							style="display: none"
							(change)="safeFile($event)"
						/>
						<label for="fileRota"> Procurar arquivo </label>
					</div>
				</form>
				<div class="controls">
					<button color="primary" mat-button mat-dialog-close>Cancelar</button>
					<button
						color="primary"
						mat-raised-button
						matStepperNext
						(click)="addCard()"
						[disabled]="!_formGroupRoute.valid"
					>
						Cadastrar
					</button>
				</div>
			</mat-step>
			<mat-step label="Confirmação" state="done">
				<div class="loading-modal">
					<ng-container *ngIf="itsSaved === 0">
						<h1>Salvando informações...</h1>
						<mat-spinner color="primary"> </mat-spinner>
					</ng-container>
					<ng-container *ngIf="itsSaved === 1">
						<h1>Informações salvas com sucesso!</h1>
						<mat-icon> done </mat-icon>
					</ng-container>
					<ng-container *ngIf="itsSaved === 2">
						<h1>Ocorreu um erro ao tentar salvar.</h1>
						<h3>Por favor, tente novamente.</h3>
						<mat-icon> error </mat-icon>
					</ng-container>
				</div>
				<div class="controls">
					<button
						color="primary"
						mat-raised-button
						*ngIf="itsSaved === 1"
						[matDialogClose]="true"
					>
						Finalizar
					</button>
				</div>
			</mat-step>
			<ng-template matStepperIcon="edit">
				<mat-icon>edit</mat-icon>
			</ng-template>
			<ng-template matStepperIcon="document">
				<mat-icon>description</mat-icon>
			</ng-template>
			<ng-template matStepperIcon="done">
				<mat-icon>done</mat-icon>
			</ng-template>
		</mat-stepper>
	</div>
</div>
