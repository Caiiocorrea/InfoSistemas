<div class="modalCadastra-container">
	<div class="close-button" title="Fechar" mat-dialog-close>
		<mat-icon>close</mat-icon>
	</div>
	<mat-stepper [orientation]="(stepperOrientation | async)!" [linear]="true">
		<mat-step
			label="Dados do veículo"
			state="edit"
			errorMessage="Preencha os campos obrigatórios."
			[stepControl]="_formGroupVehicle"
		>
			<form [formGroup]="_formGroupVehicle" autocomplete="off">
				<mat-form-field>
					<mat-label> Modelo </mat-label>
					<input
						matInput
						type="text"
						formControlName="ModeloCaminhao"
						required
					/>
					<mat-error *ngIf="!_formGroupVehicle.hasError('required')">
						Informe o modelo do veículo.
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label> Placa do veículo </mat-label>
					<input matInput type="text" formControlName="Placa" required />
					<mat-error *ngIf="!_formGroupVehicle.hasError('required')">
						Informe a placa do veículo.
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label> Tipo do veículo </mat-label>
					<mat-select formControlName="TipoCaminhao" required>
						<mat-optgroup *ngFor="let name of vehicleNames" [label]="name">
							<mat-option
								*ngFor="let vehicle of vehicles[name]"
								[value]="vehicle"
							>
								{{ vehicle }}
							</mat-option>
						</mat-optgroup>
					</mat-select>
					<mat-error *ngIf="!_formGroupVehicle.hasError('required')">
						Informe o tipo do veículo
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label> Carroceria </mat-label>
					<mat-select formControlName="Carroceria" required>
						<mat-optgroup
							*ngFor="let name of transportBodyNames"
							[label]="name"
						>
							<mat-option
								*ngFor="let transportBody of transportBodyes[name]"
								[value]="transportBody"
							>
								{{ transportBody }}
							</mat-option>
						</mat-optgroup>
					</mat-select>
					<mat-error *ngIf="!_formGroupVehicle.hasError('required')">
						Informe a carroceria do veículo.
					</mat-error>
				</mat-form-field>
			</form>
			<div class="controls">
				<button color="primary" mat-button mat-dialog-close>Cancelar</button>
				<button color="primary" mat-raised-button matStepperNext>
					Proximo
				</button>
			</div>
		</mat-step>
		<mat-step
			label="Documentação"
			state="document"
			[stepControl]="_formGroupDocuments"
			errorMessage="Preencha os campos obrigatórios."
		>
			<form [formGroup]="_formGroupDocuments" autocomplete="off">
				<mat-form-field>
					<mat-label> Renavam </mat-label>
					<input matInput type="text" formControlName="Renavam" required />
				</mat-form-field>
				<!-- <mat-form-field>
					<mat-label> Documento do veículo </mat-label>
					<input matInput type="text" formControlName="document" required />
					<mat-error *ngIf="!_formGroupVehicle.hasError('required')">
						Por favor, envie o arquivo solicitado.
					</mat-error>
				</mat-form-field> -->
			</form>
			<div class="controls">
				<button color="primary" mat-button matStepperPrevious>Voltar</button>
				<button
					color="primary"
					mat-raised-button
					matStepperNext
					(click)="registerVehicle()"
				>
					Proximo
				</button>
			</div>
		</mat-step>
		<mat-step label="Confirmação" state="done">
			<div class="loading-modal">
				<ng-container *ngIf="itsSaved === 0">
					<h1>Salvando informações...</h1>
					<mat-spinner color="primary"> </mat-spinner>
				</ng-container>
				<ng-container *ngIf="itsSaved === 1">
					<h1>Informações salvas com sucesso!</h1>
					<mat-icon> done </mat-icon>
				</ng-container>
				<ng-container *ngIf="itsSaved === 2">
					<h1>Ocorreu um erro ao tentar salvar.</h1>
					<h3>Por favor, tente novamente.</h3>
					<mat-icon> error </mat-icon>
				</ng-container>
				<ng-container *ngIf="itsSaved === 3">
					<h1>Veículo ja cadastrado e inativo.</h1>
					<h3>Deseja reativar?</h3>
					<button
						color="primary"
						mat-raised-button
						(click)="reactive(idVehicle)"
					>
						Sim, quero reativar.
					</button>
					<button mat-button mat-dialog-close>Cancelar</button>
				</ng-container>
			</div>
			<div class="controls">
				<button
					color="primary"
					mat-raised-button
					*ngIf="itsSaved === 1"
					[matDialogClose]="true"
				>
					Finalizar
				</button>
			</div>
		</mat-step>
		<ng-template matStepperIcon="edit">
			<mat-icon>edit</mat-icon>
		</ng-template>
		<ng-template matStepperIcon="document">
			<mat-icon>description</mat-icon>
		</ng-template>
		<ng-template matStepperIcon="done">
			<mat-icon>done</mat-icon>
		</ng-template>
	</mat-stepper>
</div>
