<div class="modalCadastra-container">
	<div class="close-button" title="Fechar" mat-dialog-close>
		<mat-icon>close</mat-icon>
	</div>
	<mat-stepper [orientation]="(stepperOrientation | async)!" [linear]="true">
		<mat-step
			label="Dados do usuário"
			state="edit"
			errorMessage="Preencha os campos obrigatórios."
			[stepControl]="_formGroupUser"
		>
			<form [formGroup]="_formGroupUser" autocomplete="off">
				<mat-form-field>
					<mat-label> Nome completo </mat-label>
					<input matInput type="text" formControlName="NomeCompleto" required />
					<mat-error *ngIf="!_formGroupUser.hasError('required')">
						Informe o nome do usuário.
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label> CPF </mat-label>
					<input
						matInput
						type="text"
						formControlName="CPF"
						required
						mask="000.000.000-00||00.000.000/0000-00"
					/>
					<mat-error *ngIf="!_formGroupUser.hasError('required')">
						Informe o CPF do usuário.
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label> Telefone / Celular </mat-label>
					<input
						matInput
						type="text"
						formControlName="Telefone"
						required
						mask="(00) 0000-0000||(00) 0 0000-0000"
					/>
					<mat-error *ngIf="!_formGroupUser.hasError('required')">
						Informe o celular do usuário.
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label> Email </mat-label>
					<input matInput type="text" formControlName="Email" required />
					<mat-error *ngIf="!_formGroupUser.hasError('required')">
						Informe o E-mail do usuário.
					</mat-error>
				</mat-form-field>
			</form>
			<div class="controls">
				<button color="primary" mat-button mat-dialog-close>Cancelar</button>
				<button color="primary" mat-raised-button matStepperNext>
					Proximo
				</button>
			</div>
		</mat-step>
		<mat-step
			label="Dados de acesso"
			state="edit"
			errorMessage="Preencha os campos obrigatórios."
			[stepControl]="_FormGroupAccess"
		>
			<form [formGroup]="_FormGroupAccess" autocomplete="off">
				<mat-form-field style="grid-column: span 2">
					<mat-label> Email </mat-label>
					<input matInput type="email" formControlName="Email" required />
					<mat-error *ngIf="!_FormGroupAccess.hasError('required')">
						Informe o email para acesso.
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label> Senha </mat-label>
					<input
						matInput
						type="password"
						formControlName="Senha"
						required
						(change)="checkPassword()"
					/>
					<mat-error *ngIf="!_FormGroupAccess.hasError('required')">
						Informe a senha para acesso.
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label> Confirme a senha </mat-label>
					<input
						matInput
						type="password"
						formControlName="ConfSenha"
						required
						(change)="checkPassword()"
					/>
					<mat-error *ngIf="!_FormGroupAccess.hasError('required')">
						Repita a senha.
					</mat-error>
				</mat-form-field>
				<div
					class="checkEqual"
					[ngClass]="
						checkPassword() && _FormGroupAccess.controls['ConfSenha'].dirty
							? 'confirm'
							: ' error'
					"
				>
					<p
						*ngIf="
							_FormGroupAccess.controls['ConfSenha'].dirty && !checkPassword()
						"
					>
						As senhas não coíncidem
					</p>
					<p
						*ngIf="
							_FormGroupAccess.controls['ConfSenha'].dirty && checkPassword()
						"
					>
						Senhas confirmadas
					</p>
				</div>
			</form>
			<div class="controls">
				<button color="primary" mat-button mat-dialog-close matStepperPrevious>
					Voltar
				</button>
				<button
					color="primary"
					mat-raised-button
					matStepperNext
					[disabled]="!_FormGroupAccess.valid"
				>
					Proximo
				</button>
			</div>
		</mat-step>
		<mat-step
			label="Dados de contrato"
			state="edit"
			errorMessage="Preencha os campos obrigatórios."
			[stepControl]="_FormGroupAccess"
		>
			<form [formGroup]="_FormGroupContract" autocomplete="off">
				<mat-form-field>
					<mat-label> Cargo </mat-label>
					<mat-select formControlName="Cargo" required>
						<mat-option *ngFor="let jobname of jobListNames" [value]="jobname">
							{{ jobname }}
						</mat-option>
					</mat-select>
					<mat-error *ngIf="!_FormGroupContract.hasError('required')">
						Informe o cargo do usuário
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label> CD </mat-label>
					<mat-select formControlName="CD" required>
						<mat-option *ngFor="let cdname of CDListaNames" [value]="cdname">
							{{ cdname }}
						</mat-option>
					</mat-select>
					<mat-error *ngIf="!_FormGroupContract.hasError('required')">
						Informe o CD do usuário
					</mat-error>
				</mat-form-field>
			</form>
			<div class="controls">
				<button color="primary" mat-button mat-dialog-close matStepperPrevious>
					Voltar
				</button>
				<button color="primary" mat-raised-button matStepperNext>
					Proximo
				</button>
			</div>
		</mat-step>
		<mat-step label="Confirmação" state="done">
			<div class="loading-modal">
				<ng-container *ngIf="itsSaved === 0">
					<h1>Salvando informações...</h1>
					<mat-spinner color="primary"> </mat-spinner>
				</ng-container>
				<ng-container *ngIf="itsSaved === 1">
					<h1>Informações salvas com sucesso!</h1>
					<mat-icon> done </mat-icon>
				</ng-container>
				<ng-container *ngIf="itsSaved === 2">
					<h1>Ocorreu um erro ao tentar salvar.</h1>
					<h3>Por favor, tente novamente.</h3>
					<mat-icon> error </mat-icon>
				</ng-container>
				<ng-container *ngIf="itsSaved === 3">
					<h1>Veículo ja cadastrado e inativo.</h1>
					<h3>Deseja reativar?</h3>
					<button color="primary" mat-raised-button (click)="reactive(idUser)">
						Sim, quero reativar.
					</button>
					<button mat-button mat-dialog-close>Cancelar</button>
				</ng-container>
			</div>
			<div class="controls">
				<button
					color="primary"
					mat-raised-button
					*ngIf="itsSaved === 1"
					[matDialogClose]="true"
				>
					Finalizar
				</button>
			</div>
		</mat-step>
		<ng-template matStepperIcon="edit">
			<mat-icon>edit</mat-icon>
		</ng-template>
		<ng-template matStepperIcon="document">
			<mat-icon>description</mat-icon>
		</ng-template>
		<ng-template matStepperIcon="done">
			<mat-icon>done</mat-icon>
		</ng-template>
	</mat-stepper>
</div>
